/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./js/catalog.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Catalog {\r\n\tconstructor(listOfLi, catalogCards) {\r\n\t\tthis.list = document.querySelectorAll(listOfLi);\r\n\t\tthis.catalog = document.querySelector(catalogCards);\r\n\t\tthis.bookStorage = {}; // Если данные уже были запрошены по конкретному subject, то они сохраняются для текущей сессии\r\n\t\tthis.startIndex = 0;\r\n\t\tthis.subject = 'Architecture ';\r\n\t\tthis.changeCategory();\r\n\t\tthis.requestBooks();\r\n\t}\r\n\t// Повесили обработчик на элементы списка / Корректируем subject / Запрашиваем новое или грузим старое из data\r\n\tchangeCategory() {\r\n\t\tthis.list.forEach((el) => {\r\n\t\t\tel.addEventListener('click', async () => {\r\n\t\t\t\tthis.list.forEach((elem) => {\r\n\t\t\t\t\telem.classList.remove('li-active');\r\n\t\t\t\t});\r\n\t\t\t\tel.classList.add('li-active');\r\n\r\n\t\t\t\tswitch (el.textContent) {\r\n\t\t\t\t\tcase 'Art & Fashion':\r\n\t\t\t\t\t\tthis.subject = 'Art';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Biography':\r\n\t\t\t\t\t\tthis.subject = 'Biography & Autobiography';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Food & Drink':\r\n\t\t\t\t\t\tthis.subject = 'Cooking';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Health & Wellbeing':\r\n\t\t\t\t\t\tthis.subject = 'Health & Fitness';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'History & Politics':\r\n\t\t\t\t\t\tthis.subject = 'History';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Travel & Maps':\r\n\t\t\t\t\t\tthis.subject = 'Travel';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthis.subject = el.textContent;\r\n\t\t\t\t}\r\n\t\t\t\t// Если пустой, то запросим, если нет, то отобразим сразу\r\n\t\t\t\tif (this.bookStorage[this.subject]) {\r\n\t\t\t\t\tthis.showImages(this.bookStorage[this.subject]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tawait this.requestBooks();\r\n\t\t\t\t\tif (this.bookStorage[this.subject]) {\r\n\t\t\t\t\t\tthis.showImages(this.bookStorage[this.subject]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t// Запросили картинки у Google Books / Закинули их в наш объект и грузим\r\n\tasync requestBooks() {\r\n\t\tconst response = await fetch(\r\n\t\t\t`https://www.googleapis.com/books/v1/volumes?q=\"subject:${this.subject}\"&key=AIzaSyA3JnrUQZLRo3GzvFVtY9FDWHZ2iTOrt54&printType=books&startIndex=${this.startIndex}&maxResults=6&langRestrict=en`\r\n\t\t);\r\n\t\tconst data = await response.json();\r\n\t\tif (this.bookStorage[this.subject]) {\r\n\t\t\tthis.bookStorage[this.subject].concat(data.items);\r\n\t\t} else {\r\n\t\t\tthis.bookStorage[this.subject] = data.items;\r\n\t\t}\r\n\t}\r\n\t// Отобразить картинки на странице\r\n\tshowImages(cardData) {\r\n\t\tcardData.forEach((el) => {\r\n\t\t\tconst title = el.volumeInfo.title;\r\n\t\t\tconst author = el.volumeInfo.authors ?? 'unknown';\r\n\t\t\tconst txt = el.volumeInfo.description ?? 'no information available';\r\n\t\t\tlet rating = '';\r\n\t\t\tlet price = '';\r\n\t\t\tlet cover = 'images/bookCover.jpg';\r\n\r\n\t\t\tif (el.volumeInfo.ratingsCount) {\r\n\t\t\t\trating = `<p class=\"card__rating\">${el.volumeInfo.ratingsCount} review</p>`;\r\n\t\t\t}\r\n\r\n\t\t\tif (el.volumeInfo.imageLinks) {\r\n\t\t\t\tcover = el.volumeInfo.imageLinks.thumbnail;\r\n\t\t\t}\r\n\r\n\t\t\tif (el.volumeInfo.saleInfo) {\r\n\t\t\t\tprice = `<p class=\"card__price\">${el.volumeInfo.saleInfo.retailPrice} review</p>`;\r\n\t\t\t}\r\n\r\n\t\t\tconst card = `<div class=\"card\">\r\n                            <img src=\"${cover}\" alt=\"*\">\r\n                            <div class=\"description\">\r\n                                <p>${author}</p>\r\n                                <p class=\"description__title\">${title}</p>\r\n                                ${rating}\r\n                                <p class=\"description__txt\">${txt}</p>\r\n                                ${price}\r\n                                <button class=\"description__btn\">BUY NOW</button>\r\n                            </div>\r\n                        </div>`;\r\n\r\n\t\t\tthis.catalog.innerHTML += card;\r\n\t\t});\r\n\t}\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Catalog);\r\n\n\n//# sourceURL=webpack://bookshop/./js/catalog.js?")},"./js/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _styles_index_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../styles/index.scss */ "./styles/index.scss");\n/* harmony import */ var _slider_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./slider.js */ "./js/slider.js");\n/* harmony import */ var _catalog_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catalog.js */ "./js/catalog.js");\n\r\n\r\n\r\n\r\n// метод сразу вызвал в конструкторе слайдера\r\nconst slider = new _slider_js__WEBPACK_IMPORTED_MODULE_1__["default"](\'.point\', \'.slider__poster\');\r\nconst catalog = new _catalog_js__WEBPACK_IMPORTED_MODULE_2__["default"](\'.list-li\', \'.catalog__cards\');\r\n\r\n\n\n//# sourceURL=webpack://bookshop/./js/index.js?')},"./js/slider.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Slider {\r\n\tconstructor(pointsSelector, sliderPosterSelector) {\r\n\t\tthis.points = document.querySelectorAll(pointsSelector);\r\n\t\tthis.sliderPoster = document.querySelector(sliderPosterSelector);\r\n\t\tthis.bgImages = [\r\n\t\t\t'../images/banner.png',\r\n\t\t\t'../images/banner-2.png',\r\n\t\t\t'../images/banner-3.png',\r\n\t\t];\r\n\t\tthis.counter = 0;\r\n\t\tthis.#init();\r\n\t}\r\n\t// Повесили обработчик событий / запустили интервал для слайдера\r\n\t#init() {\r\n\t\tthis.points.forEach((el, ind) => {\r\n\t\t\tel.addEventListener('click', () => {\r\n\t\t\t\tthis.counter = ind;\r\n\t\t\t\tthis.#switchImg();\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tsetInterval(() => {\r\n\t\t\tthis.counter = (this.counter + 1) % this.bgImages.length;\r\n\t\t\tthis.#switchImg();\r\n\t\t}, 5000);\r\n\t}\r\n\t// Убрали точку / добавили точку на нужный слайд / сменили картинку\r\n\t#switchImg() {\r\n\t\tthis.points.forEach((elem) => {\r\n\t\t\telem.classList.remove('point__active');\r\n\t\t});\r\n\r\n\t\tthis.points[this.counter].classList.add('point__active');\r\n\r\n\t\tthis.sliderPoster.style.backgroundImage = `url(${\r\n\t\t\tthis.bgImages[this.counter]\r\n\t\t})`;\r\n\t}\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Slider);\r\n\n\n//# sourceURL=webpack://bookshop/./js/slider.js?")},"./styles/index.scss":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://bookshop/./styles/index.scss?")}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./js/index.js")})();